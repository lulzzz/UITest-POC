function initUploader(n,t,i,r,u,f,e,o,s){o=o=="undefined"?"False":o;s=s=="undefined"?1:s;var h=$("#root").attr("href");$(document).ready(function(){var l=$("#"+t),c=$("#"+n).find(".file_uploader"),a;c.$files=[];c.$FilesObject={};c.fineUploader({request:{endpoint:h+i+"/Upload",params:{name:t}},multiple:o=="False"?!1:!0,validation:{allowedExtensions:r,sizeLimit:u*1024,itemLimit:o=="False"?s:s==1?100:s},text:{uploadButton:"إختر ملفاً..",uploadButtonClass:"btn btn-primary",cancelButton:"إلغاء",retryButton:"إعادة",deleteButton:"حذف",failUpload:"فشل التحميل",dragZone:"اسحب الملفات هنا لرفعها",dropProcessing:"جاري رفع الملفات...",formatProgress:"{percent}% من {total_size}",waitingForResponse:"جاري التحميل...",HintText:"صيغ الملفات المسموحة: "+r.join()},deleteFile:{enabled:!0,endpoint:h+i+"/deleteFile",customHeaders:{},params:{}},showMessage:function(n){AlertFun(n,"danger");n.toLowerCase()=="secerror"&&window.location.reload()}}).on("complete",function(t,i,r,u){var s,h,a,v;$("#loader").hide();s=$("#"+n).find(".file_uploader_message");h=$(" <span class='qq-deletebtn glyphicon glyphicon-trash'   title='حذف الملف' alt='حذف الملف' ><i class='material-icons'>delete<\/i><\/span>");o=="False"?(c.$files=[],c.$FilesObject={}):c.$files=l.val().split(",");u.success?(a=root+"Upload/GetFile?id="+u.fileName,c.fineUploader("setDeleteFileParams",{fileName:u.fileName},i),c.$files.push(u.fileName),c.$FilesObject[i]=u.fileName,l.val(c.$files),s.html()==""?(s.html("<div id = '"+i+"'><\/div>"),s.find("#"+i).html("<a target='_blank' href='"+a+"' rel='lightbox' alt='عرض الملف' title='عرض الملف' >"+r+"<\/a>").append(h)):(s.append("<div id = '"+i+"'><\/div>"),s.find("#"+i).html("<a target='_blank' href='"+a+"' rel='lightbox' alt='عرض الملف' title='عرض الملف' >"+r+"<\/a>").append(h)),f&&(v=new Function("fileName",f+"(fileName);"),v(u.fileName)),o=="False"&&c.hide()):u.innerHTML&&u.innerHTML.toLowerCase().indexOf("maximum request length exceeded")>=1?c.fineUploader("itemError","sizeError",r):u.error&&c.fineUploader("showMessage",u.error);h.click(function(n){var u=c.$FilesObject[i],f;c.$files=l.val().split(",");var h=c.$files.indexOf(u),a=$("#root").attr("href"),t={};t.FileName=u;t.ModuleType=$("#ModuleType").val();f=$("input[name=__RequestVerificationToken]").val();$.post("/Upload/DeleteFile",{model:t,__RequestVerificationToken:f}).done(function(){if(n.currentTarget.parentElement.remove(),c.$files.splice(h,1),l.val(c.$files),s.html()==""&&l.val(""),e){var t=new Function("fileName",e+"(fileName);");t(r)}o=="False"&&c.show()}).fail(function(n){console.log(n);alert("fail")})})});try{a=l.val().length;a>0&&setFileLink(n,t,i,l.val(),o)}catch(v){console.log("test File Uplosad")}})}function setFileLink(n,t,i,r,u,f){$(document).ready(function(){var o,e;r.length>0&&r[0]==","&&(r=r.substr(1));var i=$("#"+n).find(".file_uploader"),c=$("#"+t),s=$("#"+n).find(".file_uploader_message"),h,l=r;for(u=="False"&&(i.$files=[]),i.$FilesObject={},i.$files=r.split(","),o=100,e=0;e<i.$files.length;e++)i.$FilesObject[o]=i.$files[e],h=$("<span class='qq-deletebtn glyphicon glyphicon-trash' title='حذف الملف' alt='حذف الملف' ><i class='material-icons'>delete<\/i><\/span>"),i.$files[e].includes("Upload/GetFile")||(i.$files[e]="/Upload/GetFile?id="+i.$files[e]),s.html()==""?(s.html("<div id = '"+o+"'><\/div>"),s.find("#"+o).html("<a target='_blank' href='"+i.$files[e]+"' rel='lightbox' alt='عرض  ' title='عرض  ' >"+i.$files[e].split(":")[1]+"<\/a>").append(h)):(s.append("<div id = '"+o+"'><\/div>"),s.find("#"+o).html("<a target='_blank' href='"+i.$files[e]+"' rel='lightbox' alt='عرض  ' title='عرض  ' >"+i.$files[e].split(":")[1]+"<\/a>").append(h)),u=="False"&&i.hide(),o++,h.click(function(n){var h=n.currentTarget.parentElement.id,e=i.$FilesObject[h],o;i.$files=c.val().split(",");var l=i.$files.indexOf(e),a=$("#root").attr("href"),t={};t.FileName=e;t.ModuleType=$("#ModuleType").val();o=$("input[name=__RequestVerificationToken]").val();$.post("/Upload/DeleteFile",{model:t,__RequestVerificationToken:o}).done(function(){if(n.currentTarget.parentElement.remove(),i.$files.splice(l,1),c.val(i.$files),s.html()==""&&c.val(""),f){var t=new Function("fileName",f+"(fileName);");t(r)}u=="False"&&i.show()}).fail(function(n){console.log(n);alert("fail")})})})}var qq=function(n){"use strict";return{hide:function(){return n.style.display="none",this},attach:function(t,i){return n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent&&n.attachEvent("on"+t,i),function(){qq(n).detach(t,i)}},detach:function(t,i){return n.removeEventListener?n.removeEventListener(t,i,!1):n.attachEvent&&n.detachEvent("on"+t,i),this},contains:function(t){return n===t?!0:n.contains?n.contains(t):!!(t.compareDocumentPosition(n)&8)},insertBefore:function(t){return t.parentNode.insertBefore(n,t),this},remove:function(){return n.parentNode.removeChild(n),this},css:function(t){return t.opacity!==null&&typeof n.style.opacity!="string"&&typeof n.filters!="undefined"&&(t.filter="alpha(opacity="+Math.round(100*t.opacity)+")"),qq.extend(n.style,t),this},hasClass:function(t){var i=new RegExp("(^| )"+t+"( |$)");return i.test(n.className)},addClass:function(t){return qq(n).hasClass(t)||(n.className+=" "+t),this},removeClass:function(t){var i=new RegExp("(^| )"+t+"( |$)");return n.className=n.className.replace(i," ").replace(/^\s+|\s+$/g,""),this},getByClass:function(t){var i,r=[];return n.querySelectorAll?n.querySelectorAll("."+t):(i=n.getElementsByTagName("*"),qq.each(i,function(n,i){qq(i).hasClass(t)&&r.push(i)}),r)},children:function(){for(var i=[],t=n.firstChild;t;)t.nodeType===1&&i.push(t),t=t.nextSibling;return i},setText:function(t){return n.innerText=t,n.textContent=t,this},clearText:function(){return qq(n).setText("")}}};qq.log=function(n,t){"use strict";window.console&&(t&&t!=="info"?window.console[t]?window.console[t](n):window.console.log("<"+t+"> "+n):window.console.log(n))};qq.isObject=function(n){"use strict";return n!==null&&n&&typeof n=="object"&&n.constructor===Object};qq.isFunction=function(n){"use strict";return typeof n=="function"};qq.isString=function(n){"use strict";return Object.prototype.toString.call(n)==="[object String]"};qq.trimStr=function(n){return String.prototype.trim?n.trim():n.replace(/^\s+|\s+$/g,"")};qq.isFileOrInput=function(n){"use strict";if(window.File&&n instanceof File)return!0;if(window.HTMLInputElement){if(n instanceof HTMLInputElement&&n.type&&n.type.toLowerCase()==="file")return!0}else if(n.tagName&&n.tagName.toLowerCase()==="input"&&n.type&&n.type.toLowerCase()==="file")return!0;return!1};qq.isBlob=function(n){"use strict";return window.Blob&&Object.prototype.toString.call(n)==="[object Blob]"};qq.isXhrUploadSupported=function(){"use strict";var n=document.createElement("input");return n.type="file",n.multiple!==undefined&&typeof File!="undefined"&&typeof FormData!="undefined"&&typeof(new XMLHttpRequest).upload!="undefined"};qq.isFolderDropSupported=function(n){"use strict";return n.items&&n.items[0].webkitGetAsEntry};qq.isFileChunkingSupported=function(){"use strict";return!qq.android()&&qq.isXhrUploadSupported()&&(File.prototype.slice!==undefined||File.prototype.webkitSlice!==undefined||File.prototype.mozSlice!==undefined)};qq.extend=function(n,t,i){"use strict";qq.each(t,function(t,r){i&&qq.isObject(r)?(n[t]===undefined&&(n[t]={}),qq.extend(n[t],r,!0)):n[t]=r})};qq.indexOf=function(n,t,i){"use strict";if(n.indexOf)return n.indexOf(t,i);i=i||0;var r=n.length;for(i<0&&(i+=r);i<r;i+=1)if(n.hasOwnProperty(i)&&n[i]===t)return i;return-1};qq.getUniqueId=function(){"use strict";return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n=="x"?t:t&3|8;return i.toString(16)})};qq.ie=function(){"use strict";return navigator.userAgent.indexOf("MSIE")!==-1};qq.ie10=function(){"use strict";return navigator.userAgent.indexOf("MSIE 10")!==-1};qq.safari=function(){"use strict";return navigator.vendor!==undefined&&navigator.vendor.indexOf("Apple")!==-1};qq.chrome=function(){"use strict";return navigator.vendor!==undefined&&navigator.vendor.indexOf("Google")!==-1};qq.firefox=function(){"use strict";return navigator.userAgent.indexOf("Mozilla")!==-1&&navigator.vendor!==undefined&&navigator.vendor===""};qq.windows=function(){"use strict";return navigator.platform==="Win32"};qq.android=function(){"use strict";return navigator.userAgent.toLowerCase().indexOf("android")!==-1};qq.preventDefault=function(n){"use strict";n.preventDefault?n.preventDefault():n.returnValue=!1};qq.toElement=function(){"use strict";var n=document.createElement("div");return function(t){n.innerHTML=t;var i=n.firstChild;return n.removeChild(i),i}}();qq.each=function(n,t){"use strict";var i,r;if(n)for(i in n)if(Object.prototype.hasOwnProperty.call(n,i)&&(r=t(i,n[i]),r===!1))break};qq.obj2url=function(n,t,i){"use strict";var r,e,u=[],f="&",o=function(n,i){var r=t?/\[\]$/.test(t)?t:t+"["+i+"]":i;r!=="undefined"&&i!=="undefined"&&u.push(typeof n=="object"?qq.obj2url(n,r,!0):Object.prototype.toString.call(n)==="[object Function]"?encodeURIComponent(r)+"="+encodeURIComponent(n()):encodeURIComponent(r)+"="+encodeURIComponent(n))};if(!i&&t)f=/\?/.test(t)?/\?$/.test(t)?"":"&":"?",u.push(t),u.push(qq.obj2url(n));else if(Object.prototype.toString.call(n)==="[object Array]"&&typeof n!="undefined")for(r=-1,e=n.length;r<e;r+=1)o(n[r],r);else if(typeof n!="undefined"&&n!==null&&typeof n=="object")for(r in n)n.hasOwnProperty(r)&&o(n[r],r);else u.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return t?u.join(f):u.join(f).replace(/^&/,"").replace(/%20/g,"+")};qq.obj2FormData=function(n,t,i){"use strict";return t||(t=new FormData),qq.each(n,function(n,r){n=i?i+"["+n+"]":n;qq.isObject(r)?qq.obj2FormData(r,t,n):qq.isFunction(r)?t.append(n,r()):t.append(n,r)}),t};qq.obj2Inputs=function(n,t){"use strict";var i;return t||(t=document.createElement("form")),qq.obj2FormData(n,{append:function(n,r){i=document.createElement("input");i.setAttribute("name",n);i.setAttribute("value",r);t.appendChild(i)}}),t};qq.setCookie=function(n,t,i){var r=new Date,u="";i&&(r.setTime(r.getTime()+i*864e5),u="; expires="+r.toGMTString());document.cookie=n+"="+t+u+"; path=/"};qq.getCookie=function(n){for(var r=n+"=",u=document.cookie.split(";"),t,i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1,t.length);if(t.indexOf(r)===0)return t.substring(r.length,t.length)}};qq.getCookieNames=function(n){var i=document.cookie.split(";"),t=[];return qq.each(i,function(i,r){r=qq.trimStr(r);var u=r.indexOf("=");r.match(n)&&t.push(r.substr(0,u))}),t};qq.deleteCookie=function(n){qq.setCookie(n,"",-1)};qq.areCookiesEnabled=function(){var t=Math.random()*1e5,n="qqCookieTest:"+t;return(qq.setCookie(n,1),qq.getCookie(n))?(qq.deleteCookie(n),!0):!1};qq.parseJson=function(n){return window.JSON&&qq.isFunction(JSON.parse)?JSON.parse(n):eval("("+n+")")};qq.DisposeSupport=function(){"use strict";var n=[];return{dispose:function(){var t;do t=n.shift(),t&&t();while(t)},attach:function(){var n=arguments;this.addDisposer(qq(n[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))},addDisposer:function(t){n.push(t)}}};qq.supportedFeatures=function(){function s(){var t=!0,n;try{n=document.createElement("input");n.type="file";qq(n).hide();n.disabled&&(t=!1)}catch(i){t=!1}return t}function h(){return qq.chrome()&&navigator.userAgent.match(/Chrome\/[2][1-9]|Chrome\/[3-9][0-9]/)!==undefined}function c(){return qq.chrome()&&navigator.userAgent.match(/Chrome\/[1][4-9]|Chrome\/[2-9][0-9]/)!==undefined}var t,n,r,i,u,f,e,o;return t=s(),n=t&&qq.isXhrUploadSupported(),r=n&&h(),i=n&&qq.isFileChunkingSupported(),u=n&&i&&qq.areCookiesEnabled(),f=n&&c(),e=t&&(window.postMessage!==undefined||n),o=n,{uploading:t,ajaxUploading:n,fileDrop:n,folderDrop:r,chunking:i,resume:u,uploadCustomHeaders:n,uploadNonMultipart:n,itemSizeValidation:n,uploadViaPaste:f,progressBar:n,uploadCors:e,deleteFileCors:o}}();qq.Promise=function(){"use strict";var u,f,i,r,n,t=0;return{then:function(n,e){return t===0?(i=n,r=e):t===-1&&e?e(f):n&&n(u),this},done:function(i){return t===0?n=i:i(),this},success:function(r){return t=1,u=r,i&&i(r),n&&n(),this},failure:function(i){return t=-1,f=i,r&&r(i),n&&n(),this}}};qq.UploadButton=function(n){"use strict";function u(){var n=document.createElement("input");return t.multiple&&n.setAttribute("multiple","multiple"),t.acceptFiles&&n.setAttribute("accept",t.acceptFiles),n.setAttribute("type","file"),n.setAttribute("name",t.name),qq(n).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,width:"100%",height:"100%",padding:0,cursor:"pointer",opacity:0}),t.element.appendChild(n),r.attach(n,"change",function(){t.onChange(n)}),r.attach(n,"mouseover",function(){qq(t.element).addClass(t.hoverClass)}),r.attach(n,"mouseout",function(){qq(t.element).removeClass(t.hoverClass)}),r.attach(n,"focus",function(){qq(t.element).addClass(t.focusClass)}),r.attach(n,"blur",function(){qq(t.element).removeClass(t.focusClass)}),window.attachEvent&&n.setAttribute("tabIndex","-1"),n}var i,r=new qq.DisposeSupport,t={element:null,multiple:!1,acceptFiles:null,name:"file",onChange:function(){}};return qq.extend(t,n),qq(t.element).css({position:"relative",overflow:"hidden",direction:"rtl"}),i=u(),{getInput:function(){return i},reset:function(){i.parentNode&&qq(i).remove();qq(t.element).removeClass(t.focusClass);i=u()}}};qq.AjaxRequestor=function(n){"use strict";function o(n){var f=qq.indexOf(r,n),u=t.maxConnections,e;delete i[n];r.splice(f,1);r.length>=u&&f<u&&(e=r[u-1],s(e))}function h(n){var r=i[n].xhr,s=u(),e=!1;o(n);y(r.status)||(e=!0,f(s+" request for "+n+" has failed - response code "+r.status,"error"));t.onComplete(n,r,e)}function s(n){var r=new XMLHttpRequest,s=u(),o={},h;t.onSend(n);t.paramsStore.getParams&&(o=t.paramsStore.getParams(n));h=c(n,o);i[n].xhr=r;r.onreadystatechange=l(n);r.open(s,h,!0);t.cors.expected&&t.cors.sendCredentials&&(r.withCredentials=!0);a(n);f("Sending "+s+" request for "+n);!e&&o?r.send(qq.obj2url(o,"")):r.send()}function c(n,r){var u=t.endpointStore.getEndpoint(n),f=i[n].addToPath;return f!==undefined&&(u+="/"+f),e&&r?qq.obj2url(r,u):u}function l(n){var t=i[n].xhr;return function(){t.readyState===4&&h(n,t)}}function a(n){var r=i[n].xhr,u=t.customHeaders;r.setRequestHeader("X-Requested-With","XMLHttpRequest");r.setRequestHeader("Cache-Control","no-cache");qq.each(u,function(n,t){r.setRequestHeader(n,t)})}function v(n){var r=i[n].xhr,e=u();if(r){r.onreadystatechange=null;r.abort();o(n);f("Cancelled "+e+" for "+n);t.onCancel(n);return!0}return!1}function y(n){return qq.indexOf(t.successfulResponseCodes,n)>=0}function u(){return t.demoMode?"GET":t.method}var f,e,r=[],i=[],t={method:"POST",maxConnections:3,customHeaders:{},endpointStore:{},paramsStore:{},successfulResponseCodes:[200],demoMode:!1,cors:{expected:!1,sendCredentials:!1},log:function(){},onSend:function(){},onComplete:function(){},onCancel:function(){}};return qq.extend(t,n),f=t.log,e=u()==="GET"||u()==="DELETE",{send:function(n,u){i[n]={addToPath:u};var f=r.push(n);f<=t.maxConnections&&s(n)},cancel:function(n){return v(n)}}};qq.DeleteFileAjaxRequestor=function(n){"use strict";var i,t={endpointStore:{},maxConnections:3,customHeaders:{},paramsStore:{},demoMode:!1,cors:{expected:!1,sendCredentials:!1},log:function(){},onDelete:function(){},onDeleteComplete:function(){}};return qq.extend(t,n),i=new qq.AjaxRequestor({method:"GET",endpointStore:t.endpointStore,paramsStore:t.paramsStore,maxConnections:t.maxConnections,customHeaders:t.customHeaders,successfulResponseCodes:[200,202,204],demoMode:t.demoMode,log:t.log,onSend:t.onDelete,onComplete:t.onDeleteComplete}),{sendDelete:function(n,r){i.send(n,r);t.log("Submitted delete file request for "+n)}}};qq.UploadHandler=function(n){"use strict";var i=[],r,u,f,t;return r={debug:!1,forceMultipart:!0,paramsInBody:!1,paramsStore:{},endpointStore:{},cors:{expected:!1,sendCredentials:!1},maxConnections:3,uuidParamName:"qquuid",totalFileSizeParamName:"qqtotalfilesize",chunking:{enabled:!1,partSize:2e6,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalParts:"qqtotalparts",filename:"qqfilename"}},resume:{enabled:!1,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},blobs:{paramNames:{name:"qqblobname"}},log:function(){},onProgress:function(){},onComplete:function(){},onCancel:function(){},onUpload:function(){},onUploadChunk:function(){},onAutoRetry:function(){},onResume:function(){}},qq.extend(r,n),u=r.log,f=function(n){var u=qq.indexOf(i,n),f=r.maxConnections,e;u>=0&&(i.splice(u,1),i.length>=f&&u<f&&(e=i[f-1],t.upload(e)))},t=qq.supportedFeatures.ajaxUploading?new qq.UploadHandlerXhr(r,f,u):new qq.UploadHandlerForm(r,f,u),{add:function(n){return t.add(n)},addDump:function(n){return t.addDump(n)},upload:function(n){var u=i.push(n);if(u<=r.maxConnections)return t.upload(n)},retry:function(n){var r=qq.indexOf(i,n);return r>=0?t.upload(n,!0):this.upload(n)},cancel:function(n){u("Cancelling "+n);r.paramsStore.remove(n);t.cancel(n);f(n)},cancelAll:function(){var t=this,n=[];qq.extend(n,i);qq.each(n,function(n,i){t.cancel(i)});i=[]},getName:function(n){return t.getName(n)},getSize:function(n){if(t.getSize)return t.getSize(n)},getFile:function(n){if(t.getFile)return t.getFile(n)},getQueue:function(){return i},reset:function(){u("Resetting upload handler");i=[];t.reset()},getUuid:function(n){return t.getUuid(n)},isValid:function(n){return t.isValid(n)},getResumableFilesData:function(){return t.getResumableFilesData?t.getResumableFilesData():[]}}};qq.WindowReceiveMessage=function(n){var i={log:function(){}},t={};return qq.extend(i,n),{receiveMessage:function(n,i){var r=function(n){i(n.data)};window.postMessage?t[n]=qq(window).attach("message",r):log("iframe message passing not supported in this browser!","error")},stopReceivingMessages:function(n){if(window.postMessage){var i=t[n];i&&i()}}}};qq.UploadHandlerForm=function(n,t,i){"use strict";function a(n){e[n]!==undefined&&(e[n](),delete e[n])}function y(n,t){var i=n.id;h[o[i]]=t;e[i]=qq(n).attach("load",function(){f[i]&&(u("Received iframe load event for CORS upload request (file id "+i+")"),s[i]=setTimeout(function(){var n="No valid message received from loaded iframe for file id "+i;u(n,"error");t({error:n})},1e3))});c.receiveMessage(i,function(n){u("Received the following window message: '"+n+"'");var r=qq.parseJson(n),t=r.uuid,f;t&&h[t]?(clearTimeout(s[i]),delete s[i],a(i),f=h[t],delete h[t],c.stopReceivingMessages(i),f(r)):t||u("'"+n+"' does not contain a UUID - ignoring.")})}function p(n,t){r.cors.expected?y(n,t):e[n.id]=qq(n).attach("load",function(){if(u("Received response for "+n.id),n.parentNode){try{if(n.contentDocument&&n.contentDocument.body&&n.contentDocument.body.innerHTML=="false")return}catch(i){u("Error when attempting to access iframe during handling of upload response ("+i+")","error")}t()}})}function w(n){var i,r,t;try{r=n.contentDocument||n.contentWindow.document;t=r.body.innerHTML;u("converting iframe's innerHTML to JSON");u("innerHTML = "+t);t&&t.match(/^<pre/i)&&(t=r.body.firstChild.firstChild.nodeValue);i=qq.parseJson(t)}catch(f){u("Error when attempting to parse form upload response ("+f+")","error");i={success:!1,innerHTML:t}}return i}function b(n){var t=qq.toElement('<iframe src="javascript:false;" name="'+n+'" />');return t.setAttribute("id",n),t.style.display="none",document.body.appendChild(t),t}function k(n,t){var u=r.paramsStore.getParams(n),s=r.demoMode?"GET":"POST",i=qq.toElement('<form method="'+s+'" enctype="multipart/form-data"><\/form>'),f=r.endpointStore.getEndpoint(n),e=f;return u[r.uuidParamName]=o[n],r.paramsInBody?qq.obj2Inputs(u,i):e=qq.obj2url(u,f),i.setAttribute("action",e),i.setAttribute("target",t.name),i.style.display="none",document.body.appendChild(i),i}var r=n,f=[],o=[],e={},s={},v=t,u=i,c=new qq.WindowReceiveMessage({log:u}),h={},l;return l={add:function(n){n.setAttribute("name",r.inputName);var t=f.push(n)-1;return o[t]=qq.getUniqueId(),n.parentNode&&qq(n).remove(),t},getName:function(n){if(l.isValid(n))return f[n].value.replace(/.*(\/|\\)/,"");u(n+" is not a valid item ID.","error")},isValid:function(n){return f[n]!==undefined},reset:function(){f=[];o=[];e={}},getUuid:function(n){return o[n]},cancel:function(n){r.onCancel(n,this.getName(n));delete f[n];delete o[n];delete e[n];r.cors.expected&&(clearTimeout(s[n]),delete s[n],c.stopReceivingMessages(n));var t=document.getElementById(n);t&&(t.setAttribute("src","java"+String.fromCharCode(115)+"cript:false;"),qq(t).remove())},upload:function(n){var e=f[n],o=l.getName(n),t=b(n),i;if(!e)throw new Error("file with passed id was not added, or already uploaded or cancelled");r.onUpload(n,this.getName(n));return i=k(n,t),i.appendChild(e),p(t,function(i){u("iframe loaded");var f=i?i:w(t);if(a(n),r.cors.expected||qq(t).remove(),f.success||!r.onAutoRetry(n,o,f)){r.onComplete(n,o,f);v(n)}}),u("Sending upload request for "+n),i.submit(),qq(i).remove(),n}}};qq.UploadHandlerXhr=function(n,t,i){"use strict";function ut(n,t,i){var r=f.getSize(n),e=f.getName(n);t[u.chunking.paramNames.partIndex]=i.part;t[u.chunking.paramNames.partByteOffset]=i.start;t[u.chunking.paramNames.chunkSize]=i.size;t[u.chunking.paramNames.totalParts]=i.count;t[u.totalFileSizeParamName]=r;h&&(t[u.chunking.paramNames.filename]=e)}function ft(n){n[u.resume.paramNames.resuming]=!0}function et(n,t,i){return n.slice?n.slice(t,i):n.mozSlice?n.mozSlice(t,i):n.webkitSlice?n.webkitSlice(t,i):void 0}function a(n,t){var e=u.chunking.partSize,s=f.getSize(n),h=r[n].file||r[n].blobData.blob,i=e*t,o=i+e>=s?s:i+e,c=w(n);return{part:t,start:i,end:o,count:c,blob:et(h,i,o),size:o-i}}function w(n){var t=f.getSize(n),i=u.chunking.partSize;return Math.ceil(t/i)}function b(n){var t=new XMLHttpRequest;return r[n].xhr=t,t}function k(n,t,i,e){var o=new FormData,a=u.demoMode?"GET":"POST",s=u.endpointStore.getEndpoint(e),c=s,v=f.getName(e),y=f.getSize(e),l=r[e].blobData;return(n[u.uuidParamName]=r[e].uuid,h&&(n[u.totalFileSizeParamName]=y,l&&(n[u.blobs.paramNames.name]=l.name)),u.paramsInBody||(h||(n[u.inputName]=v),c=qq.obj2url(n,s)),t.open(a,c,!0),u.cors.expected&&u.cors.sendCredentials&&(t.withCredentials=!0),h)?(u.paramsInBody&&qq.obj2FormData(n,o),o.append(u.inputName,i),o):i}function d(n,t){var i=u.customHeaders,f=r[n].file||r[n].blobData.blob;t.setRequestHeader("X-Requested-With","XMLHttpRequest");t.setRequestHeader("Cache-Control","no-cache");h||(t.setRequestHeader("Content-Type","application/octet-stream"),t.setRequestHeader("X-Mime-Type",f.type));qq.each(i,function(n,i){t.setRequestHeader(n,i)})}function v(n,t,i){var e=f.getName(n),o=f.getSize(n);r[n].attemptingResume=!1;u.onProgress(n,e,o,o);u.onComplete(n,e,t,i);delete r[n].xhr;rt(n)}function g(n){var h=r[n].remainingChunkIdxs[0],t=a(n,h),i=b(n),v=f.getSize(n),c=f.getName(n),l,e;r[n].loaded===undefined&&(r[n].loaded=0);s&&r[n].file&&pt(n,t);i.onreadystatechange=it(n,i);i.upload.onprogress=function(t){if(t.lengthComputable){var i=t.loaded+r[n].loaded,f=ot(n,h,t.total);u.onProgress(n,c,i,f)}};u.onUploadChunk(n,c,tt(t));e=u.paramsStore.getParams(n);ut(n,e,t);r[n].attemptingResume&&ft(e);l=k(e,i,t.blob,n);d(n,i);o("Sending chunked upload request for item "+n+": bytes "+(t.start+1)+"-"+t.end+" of "+v);i.send(l)}function ot(n,t,i){var e=a(n,t),o=e.size,u=i-o,s=f.getSize(n),h=e.count,c=r[n].initialRequestOverhead,l=u-c;return r[n].lastRequestOverhead=u,t===0?(r[n].lastChunkIdxProgress=0,r[n].initialRequestOverhead=u,r[n].estTotalRequestsSize=s+h*u):r[n].lastChunkIdxProgress!==t&&(r[n].lastChunkIdxProgress=t,r[n].estTotalRequestsSize+=l),r[n].estTotalRequestsSize}function st(n){return h?r[n].lastRequestOverhead:0}function ht(n,t,i){var u=r[n].remainingChunkIdxs.shift(),f=a(n,u);r[n].attemptingResume=!1;r[n].loaded+=f.size+st(n);r[n].remainingChunkIdxs.length>0?g(n):(s&&y(n),v(n,t,i))}function ct(n,t){return n.status!==200||!t.success||t.reset}function lt(n){var t;try{t=qq.parseJson(n.responseText)}catch(i){o("Error when attempting to parse xhr response text ("+i+")","error");t={}}return t}function nt(n){o("Server has ordered chunking effort to be restarted on next attempt for item ID "+n,"error");s&&(y(n),r[n].attemptingResume=!1);r[n].remainingChunkIdxs=[];delete r[n].loaded;delete r[n].estTotalRequestsSize;delete r[n].initialRequestOverhead}function at(n){r[n].attemptingResume=!1;o("Server has declared that it cannot handle resume for item ID "+n+" - starting from the first chunk","error");nt(n);f.upload(n,!0)}function vt(n,t,i){var r=f.getName(n);u.onAutoRetry(n,r,t,i)||v(n,t,i)}function yt(n,t){var i;r[n]&&(o("xhr - server response received for "+n),o("responseText = "+t.responseText),i=lt(t),ct(t,i)?(i.reset&&nt(n),r[n].attemptingResume&&i.reset?at(n):vt(n,i,t)):c?ht(n,i,t):v(n,i,t))}function tt(n){return{partIndex:n.part,startByte:n.start+1,endByte:n.end,totalParts:n.count}}function it(n,t){return function(){t.readyState===4&&yt(n,t)}}function pt(n,t){var i=f.getUuid(n),o=r[n].loaded,s=r[n].initialRequestOverhead,h=r[n].estTotalRequestsSize,c=p(n),l=i+e+t.part+e+o+e+s+e+h,a=u.resume.cookiesExpireIn;qq.setCookie(c,l,a)}function y(n){if(r[n].file){var t=p(n);qq.deleteCookie(t)}}function wt(n){var i=qq.getCookie(p(n)),l=f.getName(n),t,r,u,s,h,c;if(i){if(t=i.split(e),t.length===5)return r=t[0],u=parseInt(t[1],10),s=parseInt(t[2],10),h=parseInt(t[3],10),c=parseInt(t[4],10),{uuid:r,part:u,lastByteSent:s,initialRequestOverhead:h,estTotalRequestsSize:c};o("Ignoring previously stored resume/chunk cookie for "+l+" - old cookie format","warn")}}function p(n){var i=f.getName(n),r=f.getSize(n),o=u.chunking.partSize,t;return t="qqfilechunk"+e+encodeURIComponent(i)+e+r+e+o,l!==undefined&&(t+=e+l),t}function bt(){if(u.resume.id!==null&&u.resume.id!==undefined&&!qq.isFunction(u.resume.id)&&!qq.isObject(u.resume.id))return u.resume.id}function kt(n,t){var c=f.getName(n),h=0,i,l,e;if(!r[n].remainingChunkIdxs||r[n].remainingChunkIdxs.length===0)for(r[n].remainingChunkIdxs=[],s&&!t&&r[n].file&&(i=wt(n),i&&(l=a(n,i.part),u.onResume(n,c,tt(l))!==!1&&(h=i.part,r[n].uuid=i.uuid,r[n].loaded=i.lastByteSent,r[n].estTotalRequestsSize=i.estTotalRequestsSize,r[n].initialRequestOverhead=i.initialRequestOverhead,r[n].attemptingResume=!0,o("Resuming "+c+" at partition index "+h)))),e=w(n)-1;e>=h;e-=1)r[n].remainingChunkIdxs.unshift(e);g(n)}function dt(n){var s=r[n].file||r[n].blobData.blob,h=f.getName(n),t,i,e;r[n].loaded=0;t=b(n);t.upload.onprogress=function(t){if(t.lengthComputable){r[n].loaded=t.loaded;u.onProgress(n,h,t.loaded,t.total)}};t.onreadystatechange=it(n,t);i=u.paramsStore.getParams(n);i.__RequestVerificationToken=$("#"+i.name).closest("form").find('input[name="__RequestVerificationToken"]').val();e=k(i,t,s,n);d(n,t);o("Sending upload request for "+n);t.send(e)}var u=n,rt=t,o=i,r=[],e="|",c=u.chunking.enabled&&qq.supportedFeatures.chunking,s=u.resume.enabled&&c&&qq.supportedFeatures.resume,l=bt(),h=u.forceMultipart||u.paramsInBody,f;return f={add:function(n){var t;if(n instanceof File)t=r.push({file:n})-1;else if(qq.isBlob(n.blob))t=r.push({blobData:n})-1;else throw new Error("Passed obj in not a File or BlobData (in qq.UploadHandlerXhr)");return r[t].uuid=qq.getUniqueId(),t},addDump:function(n){var t;return t=r.push({file:{name:n}})-1,r[t].uuid=qq.getUniqueId(),t},getName:function(n){if(f.isValid(n)){var t=r[n].file,i=r[n].blobData;return t?t.fileName!==null&&t.fileName!==undefined?t.fileName:t.name:i.name}o(n+" is not a valid item ID.","error")},getSize:function(n){var t=r[n].file||r[n].blobData.blob;return qq.isFileOrInput(t)?t.fileSize!=null?t.fileSize:t.size:t.size},getFile:function(n){if(r[n])return r[n].file||r[n].blobData.blob},getLoaded:function(n){return r[n].loaded||0},isValid:function(n){return r[n]!==undefined},reset:function(){r=[]},getUuid:function(n){return r[n].uuid},upload:function(n,t){var i=this.getName(n);u.onUpload(n,i);c?kt(n,t):dt(n)},cancel:function(n){var t=r[n].xhr;u.onCancel(n,this.getName(n));t&&(t.onreadystatechange=null,t.abort());s&&y(n);delete r[n]},getResumableFilesData:function(){var n=[],t=[];return c&&s?(n=l===undefined?qq.getCookieNames(new RegExp("^qqfilechunk\\"+e+".+\\"+e+"\\d+\\"+e+u.chunking.partSize+"=")):qq.getCookieNames(new RegExp("^qqfilechunk\\"+e+".+\\"+e+"\\d+\\"+e+u.chunking.partSize+"\\"+e+l+"=")),qq.each(n,function(n,i){var r=i.split(e),u=qq.getCookie(i).split(e);t.push({name:decodeURIComponent(r[1]),size:r[2],uuid:u[0],partIdx:u[1]})}),t):[]}}};qq.FineUploaderBasic=function(n){var t=this;this._options={debug:!1,button:null,multiple:!0,maxConnections:3,disableCancelForFormUploads:!1,autoUpload:!0,request:{endpoint:"upload",params:{},paramsInBody:!0,customHeaders:{},forceMultipart:!0,inputName:"qqfile",uuidName:"qquuid",totalFileSizeName:"qqtotalfilesize"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,itemLimit:0,stopOnFirstInvalidFile:!0},callbacks:{onSubmit:function(){},onSubmitted:function(){},onComplete:function(){},onCancel:function(){},onUpload:function(){},onUploadChunk:function(){},onResume:function(){},onProgress:function(){},onError:function(){},onAutoRetry:function(){},onManualRetry:function(){},onValidateBatch:function(){},onValidate:function(){},onSubmitDelete:function(){},onDelete:function(){},onDeleteComplete:function(){},onPasteReceived:function(){}},messages:{typeError:"صيغة الملف غير مسموح بها. الصيغ المسموح بها: {extensions}.",sizeError:"حجم الملف اكبر من المسموح به, أقصى حجم {sizeLimit}.",minSizeError:"is too small, minimum file size is {minSizeLimit}.",emptyError:"is empty, please select files again without it.",noFilesError:"لا يوجد ملفات لرفعها.",tooManyItemsError:"  يسمح برفع {itemLimit} ملف فقط.",retryFailTooManyItems:"فشل المحاولة -الرجاء المحاولة في وقت لاحق.",onLeave:"جاري رفع ملف ,اذا غادرت الصفحة ستفقد الملف المحمل , هل ترغب بالاستمرار."},retry:{enableAuto:!1,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",buttonFocus:"qq-upload-button-focus"},chunking:{enabled:!1,partSize:2e6,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts",filename:"qqfilename"}},resume:{enabled:!1,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},formatFileName:function(n){return n.length>33&&(n=n.slice(0,19)+"..."+n.slice(-14)),n},text:{defaultResponseError:"فشل التحميل",sizeSymbols:["KB","MB","GB","TB","PB","EB"]},deleteFile:{enabled:!0,endpoint:"deleteFile",customHeaders:{},params:{}},cors:{expected:!1,sendCredentials:!1},blobs:{defaultName:"misc_data",paramNames:{name:"qqblobname"}},paste:{targetElement:null,defaultName:"pasted_image"}};qq.extend(this._options,n,!0);this._wrapCallbacks();this._disposeSupport=new qq.DisposeSupport;this._filesInProgress=[];this._storedIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._netUploadedOrQueued=0;this._netUploaded=0;this._paramsStore=this._createParamsStore("request");this._deleteFileParamsStore=this._createParamsStore("deleteFile");this._endpointStore=this._createEndpointStore("request");this._deleteFileEndpointStore=this._createEndpointStore("deleteFile");this._handler=this._createUploadHandler();this._deleteHandler=this._createDeleteHandler();this._options.button&&(this._button=this._createUploadButton(this._options.button));this._options.paste.targetElement&&(this._pasteHandler=this._createPasteHandler());this._preventLeaveInProgress()};qq.FineUploaderBasic.prototype={log:function(n,t){this._options.debug&&(!t||t==="info")?qq.log("[FineUploader] "+n):t&&t!=="info"&&qq.log("[FineUploader] "+n,t)},setParams:function(n,t){t==null?this._options.request.params=n:this._paramsStore.setParams(n,t)},setDeleteFileParams:function(n,t){t==null?this._options.deleteFile.params=n:this._deleteFileParamsStore.setParams(n,t)},setEndpoint:function(n,t){t==null?this._options.request.endpoint=n:this._endpointStore.setEndpoint(n,t)},getInProgress:function(){return this._filesInProgress.length},getNetUploads:function(){return this._netUploaded},uploadStoredFiles:function(){"use strict";for(var n;this._storedIds.length;)n=this._storedIds.shift(),this._filesInProgress.push(n),this._handler.upload(n)},clearStoredFiles:function(){this._storedIds=[]},retry:function(n){return this._onBeforeManualRetry(n)?(this._netUploadedOrQueued++,this._handler.retry(n),!0):!1},cancel:function(n){this._handler.cancel(n)},cancelAll:function(){var n=[],t=this;qq.extend(n,this._storedIds);qq.each(n,function(n,i){t.cancel(i)});this._handler.cancelAll()},reset:function(){this.log("Resetting uploader...");this._handler.reset();this._filesInProgress=[];this._storedIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._button.reset();this._paramsStore.reset();this._endpointStore.reset();this._netUploadedOrQueued=0;this._netUploaded=0;this._pasteHandler&&this._pasteHandler.reset()},addFiles:function(n,t,i){var e=this,f=[],r,u;if(n){for(window.FileList&&n instanceof FileList||(n=[].concat(n)),r=0;r<n.length;r+=1)u=n[r],qq.isFileOrInput(u)?f.push(u):e.log(u+" is not a File or INPUT element!  Ignoring!","warn");this.log("تحميل "+f.length+" الملفات...");this._uploadFileOrBlobDataList(f,t,i)}},addBlobs:function(n,t,i){if(n){var f=[].concat(n),r=[],u=this;qq.each(f,function(n,t){qq.isBlob(t)&&!qq.isFileOrInput(t)?r.push({blob:t,name:u._options.blobs.defaultName}):qq.isObject(t)&&t.blob&&t.name?r.push(t):u.log("addBlobs: entry at index "+n+" is not a Blob or a BlobData object","error")});this._uploadFileOrBlobDataList(r,t,i)}else this.log("undefined or non-array parameter passed into addBlobs","error")},getUuid:function(n){return this._handler.isValid(n)?this._handler.getUuid(n):""},getResumableFilesData:function(){return this._handler.getResumableFilesData()},getSize:function(n){return this._handler.getSize(n)},getName:function(n){return this._handler.getName(n)},getFile:function(n){return this._handler.getFile(n)},deleteFile:function(n){this._onSubmitDelete(n)},setDeleteFileEndpoint:function(n,t){t==null?this._options.deleteFile.endpoint=n:this._deleteFileEndpointStore.setEndpoint(n,t)},_createUploadButton:function(n){var i=this,t=new qq.UploadButton({element:n,multiple:this._options.multiple&&qq.supportedFeatures.ajaxUploading,acceptFiles:this._options.validation.acceptFiles,onChange:function(n){i._onInputChange(n)},hoverClass:this._options.classes.buttonHover,focusClass:this._options.classes.buttonFocus});return this._disposeSupport.addDisposer(function(){t.dispose()}),t},_createUploadHandler:function(){var n=this;return new qq.UploadHandler({debug:this._options.debug,forceMultipart:this._options.request.forceMultipart,maxConnections:this._options.maxConnections,customHeaders:this._options.request.customHeaders,inputName:this._options.request.inputName,uuidParamName:this._options.request.uuidName,totalFileSizeParamName:this._options.request.totalFileSizeName,cors:this._options.cors,demoMode:this._options.demoMode,paramsInBody:this._options.request.paramsInBody,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,blobs:this._options.blobs,log:function(t,i){n.log(t,i)},onProgress:function(t,i,r,u){n._onProgress(t,i,r,u);n._options.callbacks.onProgress(t,i,r,u)},onComplete:function(t,i,r,u){n._onComplete(t,i,r,u);n._options.callbacks.onComplete(t,i,r,u)},onCancel:function(t,i){n._onCancel(t,i);n._options.callbacks.onCancel(t,i)},onUpload:function(t,i){n._onUpload(t,i);n._options.callbacks.onUpload(t,i)},onUploadChunk:function(t,i,r){n._options.callbacks.onUploadChunk(t,i,r)},onResume:function(t,i,r){return n._options.callbacks.onResume(t,i,r)},onAutoRetry:function(t,i,r,u){if(n._preventRetries[t]=r[n._options.retry.preventRetryResponseProperty],n._shouldAutoRetry(t,i,r)){n._maybeParseAndSendUploadError(t,i,r,u);n._options.callbacks.onAutoRetry(t,i,n._autoRetries[t]+1);return n._onBeforeAutoRetry(t,i),n._retryTimeouts[t]=setTimeout(function(){n._onAutoRetry(t,i,r)},n._options.retry.autoAttemptDelay*1e3),!0}return!1}})},_createDeleteHandler:function(){var n=this;return new qq.DeleteFileAjaxRequestor({maxConnections:this._options.maxConnections,customHeaders:this._options.deleteFile.customHeaders,paramsStore:this._deleteFileParamsStore,endpointStore:this._deleteFileEndpointStore,demoMode:this._options.demoMode,cors:this._options.cors,log:function(t,i){n.log(t,i)},onDelete:function(t){n._onDelete(t);n._options.callbacks.onDelete(t)},onDeleteComplete:function(t,i,r){n._onDeleteComplete(t,i,r);n._options.callbacks.onDeleteComplete(t,i,r)}})},_createPasteHandler:function(){var n=this;return new qq.PasteSupport({targetElement:this._options.paste.targetElement,callbacks:{log:function(t,i){n.log(t,i)},pasteReceived:function(t){var r=n._options.callbacks.onPasteReceived,i=r(t);i&&i.then?i.then(function(i){n._handlePasteSuccess(t,i)},function(t){n.log("Ignoring pasted image per paste received callback.  Reason = '"+t+"'")}):n._handlePasteSuccess(t)}}})},_handlePasteSuccess:function(n,t){var r=n.type.split("/")[1],i=t;i==null&&(i=this._options.paste.defaultName);i+="."+r;this.addBlobs({name:i,blob:n})},_preventLeaveInProgress:function(){var n=this;this._disposeSupport.attach(window,"beforeunload",function(t){if(n._filesInProgress.length){var t=t||window.event;return t.returnValue=n._options.messages.onLeave,n._options.messages.onLeave}})},_onSubmit:function(n){this._netUploadedOrQueued++;this._options.autoUpload&&this._filesInProgress.push(n)},_onProgress:function(){},_onComplete:function(n,t,i,r){i.success?this._netUploaded++:this._netUploadedOrQueued--;this._removeFromFilesInProgress(n);this._maybeParseAndSendUploadError(n,t,i,r)},_onCancel:function(n){this._netUploadedOrQueued--;this._removeFromFilesInProgress(n);clearTimeout(this._retryTimeouts[n]);var t=qq.indexOf(this._storedIds,n);!this._options.autoUpload&&t>=0&&this._storedIds.splice(t,1)},_isDeletePossible:function(){return this._options.deleteFile.enabled&&(!this._options.cors.expected||qq.supportedFeatures.deleteFileCors)},_onSubmitDelete:function(n){if(this._isDeletePossible())this._options.callbacks.onSubmitDelete(n)!==!1&&this._deleteHandler.sendDelete(n,this.getUuid(n));else return this.log("Delete request ignored for ID "+n+", delete feature is disabled or request not possible due to CORS on a user agent that does not support pre-flighting.","warn"),!1},_onDelete:function(){},_onDeleteComplete:function(n,t,i){var r=this._handler.getName(n);if(i){this.log("Delete request for '"+r+"' has failed.","error");this._options.callbacks.onError(n,r,"Delete request failed with response code "+t.status,t)}else this._netUploadedOrQueued--,this._netUploaded--,this.log("Delete request for '"+r+"' has succeeded.")},_removeFromFilesInProgress:function(n){var t=qq.indexOf(this._filesInProgress,n);t>=0&&this._filesInProgress.splice(t,1)},_onUpload:function(){},_onInputChange:function(n){qq.supportedFeatures.ajaxUploading?this.addFiles(n.files):this.addFiles(n);this._button.reset()},_onBeforeAutoRetry:function(n,t){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+t+"...")},_onAutoRetry:function(n,t){this.log("Retrying "+t+"...");this._autoRetries[n]++;this._handler.retry(n)},_shouldAutoRetry:function(n){return!this._preventRetries[n]&&this._options.retry.enableAuto?(this._autoRetries[n]===undefined&&(this._autoRetries[n]=0),this._autoRetries[n]<this._options.retry.maxAutoAttempts):!1},_onBeforeManualRetry:function(n){var i=this._options.validation.itemLimit,t;return this._preventRetries[n]?(this.log("Retries are forbidden for id "+n,"warn"),!1):this._handler.isValid(n)?(t=this._handler.getName(n),this._options.callbacks.onManualRetry(n,t)===!1)?!1:i>0&&this._netUploadedOrQueued+1>i?(this._itemError("retryFailTooManyItems",""),!1):(this.log("Retrying upload for '"+t+"' (id: "+n+")..."),this._filesInProgress.push(n),!0):(this.log("'"+n+"' is not a valid file ID","error"),!1)},_maybeParseAndSendUploadError:function(n,t,i,r){if(!i.success)if(r&&r.status!==200&&!i.error)this._options.callbacks.onError(n,t,"XHR returned response code "+r.status,r);else{var u=i.error?i.error:this._options.text.defaultResponseError;this._options.callbacks.onError(n,t,u,r)}},_uploadFileOrBlobDataList:function(n,t,i){var r,u=this._getValidationDescriptors(n),f=this._isBatchValid(u);if(f)if(n.length>0){for(r=0;r<n.length;r++)if(this._validateFileOrBlobData(n[r]))this._upload(n[r],t,i);else if(this._options.validation.stopOnFirstInvalidFile)return}else this._itemError("noFilesError","")},_upload:function(n,t,i){var r=this._handler.add(n),u=this._handler.getName(r);if(t&&this.setParams(t,r),i&&this.setEndpoint(i,r),this._options.callbacks.onSubmit(r,u)!==!1){this._onSubmit(r,u);this._options.callbacks.onSubmitted(r,u);this._options.autoUpload?this._handler.upload(r):this._storeForLater(r)}},_storeForLater:function(n){this._storedIds.push(n)},_isBatchValid:function(n){var r,i=this._options.validation.itemLimit,u=this._netUploadedOrQueued+n.length,t=this._options.callbacks.onValidateBatch(n)!==!1;return t&&(i===0||u<=i?t=!0:(t=!1,r=this._options.messages.tooManyItemsError.replace(/\{netItems\}/g,u).replace(/\{itemLimit\}/g,i),this._batchError(r))),t},_validateFileOrBlobData:function(n){var r,t,i;return(r=this._getValidationDescriptor(n),t=r.name,i=r.size,this._options.callbacks.onValidate(r)===!1)?!1:qq.isFileOrInput(n)&&!this._isAllowedExtension(t)?(this._itemError("typeError",t),!1):i===0?(this._itemError("emptyError",t),!1):i&&this._options.validation.sizeLimit&&i>this._options.validation.sizeLimit?(this._itemError("sizeError",t),!1):i&&i<this._options.validation.minSizeLimit?(this._itemError("minSizeError",t),!1):!0},_itemError:function(n,t){function r(n,t){i=i.replace(n,t)}var i=this._options.messages[n],f=[],e=[].concat(t),o=e[0],s,u;qq.each(this._options.validation.allowedExtensions,function(n,t){qq.isString(t)&&f.push(t)});s=f.join(", ").toLowerCase();r("{file}",this._options.formatFileName(o));r("{extensions}",s);r("{sizeLimit}",this._formatSize(this._options.validation.sizeLimit));r("{minSizeLimit}",this._formatSize(this._options.validation.minSizeLimit));u=i.match(/(\{\w+\})/g);u!==null&&qq.each(u,function(n,t){r(t,e[n])});this._options.callbacks.onError(null,o,i);return i},_batchError:function(n){this._options.callbacks.onError(null,null,n)},_isAllowedExtension:function(n){var t=this._options.validation.allowedExtensions,i=!1;return t.length?(qq.each(t,function(t,r){if(qq.isString(r)){var u=new RegExp("\\."+r+"$","i");if(n.match(u)!=null)return i=!0,!1}}),i):!0},_formatSize:function(n){var t=-1;do n=n/1024,t++;while(n>99);return n*1024+this._options.text.sizeSymbols[1]},_wrapCallbacks:function(){var n,t,i;n=this;t=function(t,i,r){try{return i.apply(n,r)}catch(u){n.log("Caught exception in '"+t+"' callback - "+u.message,"error")}};for(i in this._options.callbacks)(function(){var r,u;r=i;u=n._options.callbacks[r];n._options.callbacks[r]=function(){return t(r,u,arguments)}})()},_parseFileOrBlobDataName:function(n){return qq.isFileOrInput(n)?n.value?n.value.replace(/.*(\/|\\)/,""):n.fileName!==null&&n.fileName!==undefined?n.fileName:n.name:n.name},_parseFileOrBlobDataSize:function(n){var t;return qq.isFileOrInput(n)?n.value||(t=n.fileSize!==null&&n.fileSize!==undefined?n.fileSize:n.size):t=n.blob.size,t},_getValidationDescriptor:function(n){var r,i,t;return t={},r=this._parseFileOrBlobDataName(n),i=this._parseFileOrBlobDataSize(n),t.name=r,i!==undefined&&(t.size=i),t},_getValidationDescriptors:function(n){var i=this,t=[];return qq.each(n,function(n,r){t.push(i._getValidationDescriptor(r))}),t},_createParamsStore:function(n){var t={},i=this;return{setParams:function(n,i){var r={};qq.extend(r,n);t[i]=r},getParams:function(r){var u={};return r!=null&&t[r]?qq.extend(u,t[r]):qq.extend(u,i._options[n].params),u},remove:function(n){return delete t[n]},reset:function(){t={}}}},_createEndpointStore:function(n){var t={},i=this;return{setEndpoint:function(n,i){t[i]=n},getEndpoint:function(r){return r!=null&&t[r]?t[r]:i._options[n].endpoint},remove:function(n){return delete t[n]},reset:function(){t={}}}}};qq.DragAndDrop=function(n){"use strict";function o(n){t.callbacks.dropLog("Grabbed "+n.length+" dropped files.");i.dropDisabled(!1);t.callbacks.processingDroppedFilesComplete(n)}function f(n){var e,u,i=new qq.Promise;return n.isFile?n.file(function(n){r.push(n);i.success()},function(r){t.callbacks.dropLog("Problem parsing '"+n.fullPath+"'.  FileError code "+r.code+".","error");i.failure()}):n.isDirectory&&(e=n.createReader(),e.readEntries(function(n){var t=n.length;for(u=0;u<n.length;u+=1)f(n[u]).done(function(){t-=1;t===0&&i.success()});n.length||i.success()},function(r){t.callbacks.dropLog("Problem parsing '"+n.fullPath+"'.  FileError code "+r.code+".","error");i.failure()})),i}function s(n){var u,e,o,s=[],h=new qq.Promise;if(t.callbacks.processingDroppedFiles(),i.dropDisabled(!0),n.files.length>1&&!t.allowMultipleItems)t.callbacks.processingDroppedFilesComplete([]),t.callbacks.dropError("tooManyFilesError",""),i.dropDisabled(!1),h.failure();else{if(r=[],qq.isFolderDropSupported(n))for(e=n.items,u=0;u<e.length;u+=1)o=e[u].webkitGetAsEntry(),o&&(o.isFile?r.push(e[u].getAsFile()):s.push(f(o).done(function(){s.pop();s.length===0&&h.success()})));else r=n.files;s.length===0&&h.success()}return h}function e(n){i=new qq.UploadDropZone({element:n,onEnter:function(i){qq(n).addClass(t.classes.dropActive);i.stopPropagation()},onLeaveNotDescendants:function(){qq(n).removeClass(t.classes.dropActive)},onDrop:function(i){t.hideDropZonesBeforeEnter&&qq(n).hide();qq(n).removeClass(t.classes.dropActive);s(i.dataTransfer).done(function(){o(r)})}});u.addDisposer(function(){i.dispose()});t.hideDropZonesBeforeEnter&&qq(n).hide()}function h(n){var t;return qq.each(n.dataTransfer.types,function(n,i){if(i==="Files")return t=!0,!1}),t}function c(){var n=t.dropZoneElements;qq.each(n,function(n,t){e(t)});n.length&&(!qq.ie()||qq.ie10())&&u.attach(document,"dragenter",function(t){!i.dropDisabled()&&h(t)&&qq.each(n,function(n,t){qq(t).css({display:"block"})})});u.attach(document,"dragleave",function(i){t.hideDropZonesBeforeEnter&&qq.FineUploader.prototype._leaving_document_out(i)&&qq.each(n,function(n,t){qq(t).hide()})});u.attach(document,"drop",function(i){t.hideDropZonesBeforeEnter&&qq.each(n,function(n,t){qq(t).hide()});i.preventDefault()})}var t,i,r=[],u=new qq.DisposeSupport;return t={dropZoneElements:[],hideDropZonesBeforeEnter:!1,allowMultipleItems:!0,classes:{dropActive:null},callbacks:new qq.DragAndDrop.callbacks},qq.extend(t,n,!0),c(),{setupExtraDropzone:function(n){t.dropZoneElements.push(n);e(n)},removeDropzone:function(n){var i,r=t.dropZoneElements;for(i in r)if(r[i]===n)return r.splice(i,1)},dispose:function(){u.dispose();i.dispose()}}};qq.DragAndDrop.callbacks=function(){return{processingDroppedFiles:function(){},processingDroppedFilesComplete:function(){},dropError:function(n,t){qq.log("Drag & drop error code '"+n+" with these specifics: '"+t+"'","error")},dropLog:function(n,t){qq.log(n,t)}}};qq.UploadDropZone=function(n){"use strict";function s(){return qq.safari()||qq.firefox()&&qq.windows()}function h(){o||(s?i.attach(document,"dragover",function(n){n.preventDefault()}):i.attach(document,"dragover",function(n){n.dataTransfer&&(n.dataTransfer.dropEffect="none",n.preventDefault())}),o=!0)}function u(n){if(qq.ie()&&!qq.ie10())return!1;var i,t=n.dataTransfer,r=qq.safari();return i=qq.ie10()?!0:t.effectAllowed!=="none",t&&i&&(t.files||!r&&t.types.contains&&t.types.contains("Files"))}function f(n){return n!==undefined&&(e=n),e}function c(){i.attach(r,"dragover",function(n){if(u(n)){var t=qq.ie()?null:n.dataTransfer.effectAllowed;n.dataTransfer.dropEffect=t==="move"||t==="linkMove"?"move":"copy";n.stopPropagation();n.preventDefault()}});i.attach(r,"dragenter",function(n){if(!f()){if(!u(n))return;t.onEnter(n)}});i.attach(r,"dragleave",function(n){if(u(n)){t.onLeave(n);var i=document.elementFromPoint(n.clientX,n.clientY);if(!qq(this).contains(i))t.onLeaveNotDescendants(n)}});i.attach(r,"drop",function(n){if(!f()){if(!u(n))return;n.preventDefault();t.onDrop(n)}})}var t,r,e,o,i=new qq.DisposeSupport;return t={element:null,onEnter:function(){},onLeave:function(){},onLeaveNotDescendants:function(){},onDrop:function(){}},qq.extend(t,n),r=t.element,h(),c(),{dropDisabled:function(n){return f(n)},dispose:function(){i.dispose()}}};qq.FineUploader=function(n){qq.FineUploaderBasic.apply(this,arguments);qq.extend(this._options,{element:null,listElement:null,dragAndDrop:{extraDropzones:[],hideDropzones:!0,disableDefaultDropzone:!1},text:{uploadButton:"Upload a file",uploadButtonClass:"qq-upload-button-default",cancelButton:"Cancel",retryButton:"Retry",deleteButton:"Delete",failUpload:"Upload failed",dragZone:"Drop files here to upload",dropProcessing:"Processing dropped files...",formatProgress:"{percent}% of {total_size}",waitingForResponse:"Processing...",HintText:""},template:'<div class="qq-uploader">'+(!this._options.dragAndDrop||!this._options.dragAndDrop.disableDefaultDropzone?'<div class="qq-upload-drop-area"><span>{dragZoneText}<\/span><\/div>':"")+(this._options.button?"":'<div class="qq-upload-button {uploadButtonClass}"><div>{uploadButtonText}<\/div><\/div><i>&nbsp;&nbsp;{HintText}<\/i>')+'<span class="qq-drop-processing"><span>{dropProcessingText}<\/span><span class="qq-drop-processing-spinner"><\/span><\/span>'+(this._options.listElement?"":'<ul class="qq-upload-list"><\/ul>')+"<\/div>",fileTemplate:'<li><div class="qq-progress-bar"><\/div><span class="qq-upload-spinner"><\/span><span class="qq-upload-finished"><\/span><span class="qq-upload-file"><\/span><span class="qq-upload-size"><\/span><a class="qq-upload-cancel" href="#">{cancelButtonText}<\/a><a class="qq-upload-retry" href="#">{retryButtonText}<\/a><a class="qq-upload-delete" href="#">{deleteButtonText}<\/a><span class="qq-upload-status-text">{statusText}<\/span><\/li>',classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",list:"qq-upload-list",progressBar:"qq-progress-bar",file:"qq-upload-file",spinner:"qq-upload-spinner",finished:"qq-upload-finished",retrying:"qq-upload-retrying",retryable:"qq-upload-retryable",size:"qq-upload-size",cancel:"qq-upload-cancel",deleteButton:"qq-upload-delete",retry:"qq-upload-retry",statusText:"qq-upload-status-text",success:"qq-upload-success",fail:"qq-upload-fail",successIcon:null,failIcon:null,dropProcessing:"qq-drop-processing",dropProcessingSpinner:"qq-drop-processing-spinner"},failedUploadTextDisplay:{mode:"default",maxChars:50,responseProperty:"error",enableTooltip:!0},messages:{tooManyFilesError:"You may only drop one file",unsupportedBrowser:"Unrecoverable error - this browser does not permit file uploading of any kind."},retry:{showAutoRetryNote:!0,autoRetryNote:"Retrying {retryNum}/{maxAuto}...",showButton:!1},deleteFile:{forceConfirm:!1,confirmMessage:"Are you sure you want to delete {filename}?",deletingStatusText:"Deleting...",deletingFailedText:"Delete failed"},display:{fileSizeOnSubmit:!1},paste:{promptForName:!1,namePromptMessage:"Please name this image"},showMessage:function(n){setTimeout(function(){window.alert(n)},0)},showConfirm:function(n,t,i){setTimeout(function(){var r=window.confirm(n);r?t():i&&i()},0)},showPrompt:function(n,t){var i=new qq.Promise,r=window.prompt(n,t);return r!=null&&qq.trimStr(r).length>0?i.success(r):i.failure("Undefined or invalid user-supplied value."),i}},!0);qq.extend(this._options,n,!0);qq.supportedFeatures.uploading&&(!this._options.cors.expected||qq.supportedFeatures.uploadCors)?(this._wrapCallbacks(),this._options.template=this._options.template.replace(/\{dragZoneText\}/g,this._options.text.dragZone),this._options.template=this._options.template.replace(/\{uploadButtonText\}/g,this._options.text.uploadButton),this._options.template=this._options.template.replace(/\{uploadButtonClass\}/g,this._options.text.uploadButtonClass),this._options.template=this._options.template.replace(/\{HintText\}/g,this._options.text.HintText),this._options.template=this._options.template.replace(/\{dropProcessingText\}/g,this._options.text.dropProcessing),this._options.fileTemplate=this._options.fileTemplate.replace(/\{cancelButtonText\}/g,this._options.text.cancelButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{retryButtonText\}/g,this._options.text.retryButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{deleteButtonText\}/g,this._options.text.deleteButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{statusText\}/g,""),this._element=this._options.element,this._element.innerHTML=this._options.template,this._listElement=this._options.listElement||this._find(this._element,"list"),this._classes=this._options.classes,this._button||(this._button=this._createUploadButton(this._find(this._element,"button"))),this._bindCancelAndRetryEvents(),this._dnd=this._setupDragAndDrop(),this._options.paste.targetElement&&this._options.paste.promptForName&&this._setupPastePrompt()):this._options.element.innerHTML="<div>"+this._options.messages.unsupportedBrowser+"<\/div>"};qq.extend(qq.FineUploader.prototype,qq.FineUploaderBasic.prototype);qq.extend(qq.FineUploader.prototype,{clearStoredFiles:function(){qq.FineUploaderBasic.prototype.clearStoredFiles.apply(this,arguments);this._listElement.innerHTML=""},addExtraDropzone:function(n){this._dnd.setupExtraDropzone(n)},removeExtraDropzone:function(n){return this._dnd.removeDropzone(n)},getItemByFileId:function(n){for(var t=this._listElement.firstChild;t;){if(t.qqFileId==n)return t;t=t.nextSibling}},reset:function(){qq.FineUploaderBasic.prototype.reset.apply(this,arguments);this._element.innerHTML=this._options.template;this._listElement=this._options.listElement||this._find(this._element,"list");this._options.button||(this._button=this._createUploadButton(this._find(this._element,"button")));this._bindCancelAndRetryEvents();this._dnd.dispose();this._dnd=this._setupDragAndDrop()},_removeFileItem:function(n){var t=this.getItemByFileId(n);qq(t).remove()},_setupDragAndDrop:function(){var n=this,i=this._find(this._element,"dropProcessing"),r=this._options.dragAndDrop.extraDropzones,t;return t=function(n){n.preventDefault()},this._options.dragAndDrop.disableDefaultDropzone||r.push(this._find(this._options.element,"drop")),new qq.DragAndDrop({dropZoneElements:r,hideDropZonesBeforeEnter:this._options.dragAndDrop.hideDropzones,allowMultipleItems:this._options.multiple,classes:{dropActive:this._options.classes.dropActive},callbacks:{processingDroppedFiles:function(){var r=n._button.getInput();qq(i).css({display:"block"});qq(r).attach("click",t)},processingDroppedFilesComplete:function(r){var u=n._button.getInput();qq(i).hide();qq(u).detach("click",t);r&&n.addFiles(r)},dropError:function(t,i){n._itemError(t,i)},dropLog:function(t,i){n.log(t,i)}}})},_leaving_document_out:function(n){return(qq.chrome()||qq.safari()&&qq.windows())&&n.clientX==0&&n.clientY==0||qq.firefox()&&!n.relatedTarget},_storeForLater:function(n){qq.FineUploaderBasic.prototype._storeForLater.apply(this,arguments);var t=this.getItemByFileId(n);qq(this._find(t,"spinner")).hide()},_find:function(n,t){var i=qq(n).getByClass(this._options.classes[t])[0];if(!i)throw new Error("element not found "+t);return i},_onSubmit:function(n,t){qq.FineUploaderBasic.prototype._onSubmit.apply(this,arguments);this._addToList(n,t);$("#loader").show()},_onProgress:function(n,t,i,r){qq.FineUploaderBasic.prototype._onProgress.apply(this,arguments);var u,f,e,o;u=this.getItemByFileId(n);f=this._find(u,"progressBar");e=Math.round(i/r*100);i===r?(o=this._find(u,"cancel"),qq(o).hide(),qq(f).hide(),qq(this._find(u,"statusText")).setText(this._options.text.waitingForResponse),this._displayFileSize(n)):(this._displayFileSize(n,i,r),qq(f).css({display:"block"}));qq(f).css({width:e+"%"})},_onComplete:function(n,t,i){qq.FineUploaderBasic.prototype._onComplete.apply(this,arguments);var r=this.getItemByFileId(n);qq(this._find(r,"statusText")).clearText();qq(r).removeClass(this._classes.retrying);qq(this._find(r,"progressBar")).hide();(!this._options.disableCancelForFormUploads||qq.supportedFeatures.ajaxUploading)&&qq(this._find(r,"cancel")).hide();qq(this._find(r,"spinner")).hide();i.success?(this._isDeletePossible()&&this._showDeleteLink(n),qq(r).addClass(this._classes.success),this._classes.successIcon&&(this._find(r,"finished").style.display="inline-block",qq(r).addClass(this._classes.successIcon))):(qq(r).addClass(this._classes.fail),this._classes.failIcon&&(this._find(r,"finished").style.display="inline-block",qq(r).addClass(this._classes.failIcon)),this._options.retry.showButton&&!this._preventRetries[n]&&qq(r).addClass(this._classes.retryable),this._controlFailureTextDisplay(r,i))},_onUpload:function(n){qq.FineUploaderBasic.prototype._onUpload.apply(this,arguments);this._showSpinner(n)},_onCancel:function(n){qq.FineUploaderBasic.prototype._onCancel.apply(this,arguments);this._removeFileItem(n)},_onBeforeAutoRetry:function(n){var t,r,f,u,e,i;qq.FineUploaderBasic.prototype._onBeforeAutoRetry.apply(this,arguments);t=this.getItemByFileId(n);r=this._find(t,"progressBar");this._showCancelLink(t);r.style.width=0;qq(r).hide();this._options.retry.showAutoRetryNote&&(f=this._find(t,"statusText"),u=this._autoRetries[n]+1,e=this._options.retry.maxAutoAttempts,i=this._options.retry.autoRetryNote.replace(/\{retryNum\}/g,u),i=i.replace(/\{maxAuto\}/g,e),qq(f).setText(i),u===1&&qq(t).addClass(this._classes.retrying))},_onBeforeManualRetry:function(n){var t=this.getItemByFileId(n);return qq.FineUploaderBasic.prototype._onBeforeManualRetry.apply(this,arguments)?(this._find(t,"progressBar").style.width=0,qq(t).removeClass(this._classes.fail),qq(this._find(t,"statusText")).clearText(),this._showSpinner(n),this._showCancelLink(t),!0):(qq(t).addClass(this._classes.retryable),!1)},_onSubmitDelete:function(n){if(this._isDeletePossible())this._options.callbacks.onSubmitDelete(n)!==!1&&(this._options.deleteFile.forceConfirm?this._showDeleteConfirm(n):this._sendDeleteRequest(n));else return this.log("Delete request ignored for file ID "+n+", delete feature is disabled.","warn"),!1},_onDeleteComplete:function(n,t,i){qq.FineUploaderBasic.prototype._onDeleteComplete.apply(this,arguments);var r=this.getItemByFileId(n),u,f;r&&(u=this._find(r,"spinner"),f=this._find(r,"statusText"),qq(u).hide());i?(qq(f).setText(this._options.deleteFile.deletingFailedText),this._showDeleteLink(n)):this._removeFileItem(n)},_sendDeleteRequest:function(n){var t=this.getItemByFileId(n),i,r;t&&(i=this._find(t,"deleteButton"),r=this._find(t,"statusText"),qq(i).hide(),this._showSpinner(n),qq(r).setText(this._options.deleteFile.deletingStatusText));this._deleteHandler.sendDelete(n,this.getUuid(n))},_showDeleteConfirm:function(n){var t=this._handler.getName(n),i=this._options.deleteFile.confirmMessage.replace(/\{filename\}/g,t),u=this.getUuid(n),r=this;this._options.showConfirm(i,function(){r._sendDeleteRequest(n)})},_addToList:function(n,t){var i=qq.toElement(this._options.fileTemplate),r,u;this._options.disableCancelForFormUploads&&!qq.supportedFeatures.ajaxUploading&&(r=this._find(i,"cancel"),qq(r).remove());i.qqFileId=n;u=this._find(i,"file");qq(u).setText(this._options.formatFileName(t));qq(this._find(i,"size")).hide();this._options.multiple||(this._handler.cancelAll(),this._clearList());this._listElement.appendChild(i);this._options.display.fileSizeOnSubmit&&qq.supportedFeatures.ajaxUploading&&this._displayFileSize(n)},_clearList:function(){this._listElement.innerHTML="";this.clearStoredFiles()},_displayFileSize:function(n,t,i){var f=this.getItemByFileId(n),e=this.getSize(n),r=this._formatSize(e),u=this._find(f,"size");t!==undefined&&i!==undefined&&(r=this._formatProgress(t,i));qq(u).css({display:"inline"});qq(u).setText(r)},_bindCancelAndRetryEvents:function(){var n=this,t=this._listElement;this._disposeSupport.attach(t,"click",function(t){var r,i;if(t=t||window.event,r=t.target||t.srcElement,qq(r).hasClass(n._classes.cancel)||qq(r).hasClass(n._classes.retry)||qq(r).hasClass(n._classes.deleteButton)){for(qq.preventDefault(t),i=r.parentNode;i.qqFileId===undefined;)i=i.parentNode;qq(r).hasClass(n._classes.deleteButton)?n.deleteFile(i.qqFileId):qq(r).hasClass(n._classes.cancel)?n.cancel(i.qqFileId):(qq(i).removeClass(n._classes.retryable),n.retry(i.qqFileId))}})},_formatProgress:function(n,t){function r(n,t){i=i.replace(n,t)}var i=this._options.text.formatProgress;return r("{percent}",Math.round(n/t*100)),r("{total_size}",this._formatSize(t)),i},_controlFailureTextDisplay:function(n,t){var r,u,f,i,e;r=this._options.failedUploadTextDisplay.mode;u=this._options.failedUploadTextDisplay.maxChars;f=this._options.failedUploadTextDisplay.responseProperty;r==="custom"?(i=t[f],i?i.length>u&&(e=i.substring(0,u)+"..."):(i=this._options.text.failUpload,this.log("'"+f+"' is not a valid property on the server response.","warn")),qq(this._find(n,"statusText")).setText(e||i),this._options.failedUploadTextDisplay.enableTooltip&&this._showTooltip(n,i)):r==="default"?qq(this._find(n,"statusText")).setText(this._options.text.failUpload):r!=="none"&&this.log("failedUploadTextDisplay.mode value of '"+r+"' is not valid","warn")},_showTooltip:function(n,t){n.title=t},_showSpinner:function(n){var t=this.getItemByFileId(n),i=this._find(t,"spinner");i.style.display="inline-block"},_showCancelLink:function(n){if(!this._options.disableCancelForFormUploads||qq.supportedFeatures.ajaxUploading){var t=this._find(n,"cancel");qq(t).css({display:"inline"})}},_showDeleteLink:function(n){var t=this.getItemByFileId(n),i=this._find(t,"deleteButton");qq(i).css({display:"inline"})},_itemError:function(){var n=qq.FineUploaderBasic.prototype._itemError.apply(this,arguments);this._options.showMessage(n)},itemError:function(){var n=qq.FineUploaderBasic.prototype._itemError.apply(this,arguments);this._options.showMessage(n)},showMessage:function(n){this._options.showMessage(n)},_batchError:function(n){qq.FineUploaderBasic.prototype._batchError.apply(this,arguments);this._options.showMessage(n)},_setupPastePrompt:function(){var n=this;this._options.callbacks.onPasteReceived=function(){var t=n._options.paste.namePromptMessage,i=n._options.paste.defaultName;return n._options.showPrompt(t,i)}},loadDumpFile:function(n){this._handler.addDump(n);this._addToList(0,n)}}),function(n){"use strict";var t,i,e,u,f,o,s,r,h,c;o=["uploaderType"];e=function(n){if(n){var u=r(n);s(u);f("uploaderType")==="basic"?t(new qq.FineUploaderBasic(u)):t(new qq.FineUploader(u))}return i};u=function(n,t){var r=i.data("fineuploader");if(t)r===undefined&&(r={}),r[n]=t,i.data("fineuploader",r);else return r===undefined?null:r[n]};t=function(n){return u("uploader",n)};f=function(n,t){return u(n,t)};s=function(t){var r=t.callbacks={},u=new qq.FineUploaderBasic;n.each(u._options.callbacks,function(n){var t,u;t=/^on(\w+)/.exec(n)[1];t=t.substring(0,1).toLowerCase()+t.substring(1);u=i;r[n]=function(){var n=Array.prototype.slice.call(arguments);return u.triggerHandler(t,n)}})};r=function(t,u){var e,s;return e=u===undefined?t.uploaderType!=="basic"?{element:i[0]}:{}:u,n.each(t,function(t,i){n.inArray(t,o)>=0?f(t,i):i instanceof n?e[t]=i[0]:n.isPlainObject(i)?(e[t]={},r(i,e[t])):n.isArray(i)?(s=[],n.each(i,function(t,i){i instanceof n?n.merge(s,i):s.push(i)}),e[t]=s):e[t]=i}),u===undefined?e:void 0};h=function(i){return n.type(i)==="string"&&!i.match(/^_/)&&t()[i]!==undefined};c=function(n){var i=[],u=Array.prototype.slice.call(arguments,1);return r(u,i),t()[n].apply(t(),i)};n.fn.fineUploader=function(r){var f=this,o=arguments,u=[];return(this.each(function(s,l){if(i=n(l),t()&&h(r)){if(u.push(c.apply(f,o)),f.length===1)return!1}else typeof r!="object"&&r?n.error("Method "+r+" does not exist on jQuery.fineUploader"):e.apply(f,o)}),u.length===1)?u[0]:u.length>1?u:this}}(jQuery);
//# sourceMappingURL=fineUploderbundle.min.js.map